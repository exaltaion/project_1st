<!DOCTYPE html>
<html lang="ko">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <title>업무 리스트 페이지(가제목 : 회사내 업무관리 사이트)</title>

   <!-- CSS only -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

   <!--css 링크-->
   <link rel = "stylesheet" href = "css/style.css"></head>

   <!--header footer 분리-->
   <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
   <script type="text/javascript">   
   $(document).ready( function() {
   $("#headers").load("header.html");
   $("#footers").load("footer.html");
                                 });
   </script>

<body>
      <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

   <!--header section start -->
   <div id="headers"></div>
   <!-- header section end -->

   <!-- main section start -->
   <main class="main">
      <div>
      <br>
      <h3>업무리스트 페이지(관리자)</h3>
      <div class="container">
         <button id="allCloseBtn" class="btn btn-primary"style="background-color : rgb(66, 1, 6); border-color : rgb(66, 1, 6) ">전부닫기</button>
         <button id='addRowBtn' type="button" class="btn btn-primary"style="background-color : rgb(66, 1, 6); border-color : rgb(66, 1, 6) ">업무 추가</button>
         <a href="performanceAnaysis.html"  type="button" class="btn btn-primary"style="background-color : rgb(66, 1, 6); border-color : rgb(66, 1, 6) ">업무 성과</a>
         <a href="#none" onclick="openPopup()"  type="button" class="btn btn-primary"style="background-color : rgb(66, 1, 6); border-color : rgb(66, 1, 6) ">업무 입력</a>

         <table class="table" style="text-align: center;">
            <thead>
               <tr>
                  <th scope="col">구 분</th>
                  <th scope="col">제 목</th>
                  <th scope="col">시작일</th>
                  <th scope="col">종료일</th>
                  <th scope="col">담당자</th>
                  <th scope="col">종 료</th>
               </tr>
            </thead>
            <tbody id="dynamicTbody">
               <tr id="tr1">
                  <th scope="row">1</th>
                  <td>
                     <div class="item-container">
                        <p class="item-title">업무관리 페이지 제작</p>
                        <div class="item-content">
                           <p>클릭하면 상세 페이지로 이동 버튼 추가</p>
                           <p>업무담당자로 지정받은 자는 결과 입력 기능 추가</p>
                        </div>
                     </div>
                  </td>
                  <td><input type="date" value="2023-03-30">
                  </td>
                  <td><input type="date" value="2023-03-31">
                  </td>
                  <td><select>
                        <option value="1" selected>최희두</option>
                        <option value="2">김모바일</option>
                        <option value="3" >이서버</option>
                        <option value="4">박모바일</option>
                        <option value="5">최서버</option>
                     </select></td>
                     <td> <button id="1" type="button" class="btn btn-danger deleteBtn">삭제</button></td>
               <tr id="tr2">
                  <th scope="row">2</th>
                  <td>
                     <div class="item-container">
                        <p class="item-title">업무상세페이지 제작</p>
                        <div class="item-content">
                           <p>업무담당자 지정받은 자의 결과 입력 기능 추가</p>
                           <p>결과를 종합하여 연봉협상에 반영토록 저장</p>
                        </div>
                     </div>
                  </td>
                  <td><input type="date" value="2023-03-31">
                  </td>
                  <td><input type="date" value="2023-04-01">
                  </td>
                  <td><select>
                        <option value="1">최희두</option>
                        <option value="2"selected>김모바일</option>
                        <option value="3">이서버</option>
                        <option value="4">박모바일</option>
                        <option value="5">최서버</option>
                     </select></td>
                     <td> <button id="2" type="button" class="btn btn-danger deleteBtn">삭제</button></td>
               </tr>
               <tr id="tr3">
               <th scope="row">3</th>
               <td>
                  <div class="item-container">
                     <p class="item-title">조직도 페이지 제작</p>
                     <div class="item-content">
                        <p>사진과 담당 업무가 기술 될 수 있도록 제작</p>
                        <p>한페이지 나올 수 있도록 제작</p>
                     </div>
                  </div>
               </td>
               <td><input type="date" value="2023-04-01"></td>
               <td><input type="date" value="2023-04-02"></td>
               <td><select>
                     <option value="1">최희두</option>
                     <option value="2">김모바일</option>
                     <option value="3" selected>이서버</option>
                     <option value="4">박모바일</option>
                     <option value="5">최서버</option>
                  </select></td>
               <td> <button id="3" type="button" class="btn btn-danger deleteBtn">삭제</button></td>
               </tr>
            </tbody>
            <colgroup>
               <col width="8%">
               <col width="30%">
               <col width="20%">
               <col width="20%">
               <col width="10%">
               <col width="15%">
            </colgroup>
         </table>
         <br>         <br>         <br>
         

      </div>
   </main>
   <!-- main section end -->

   <!-- footer section start -->
   <div id="footers"></div>
   <!-- footer section end -->   

   <script>
      //title   1 2 3
      //content 1 2 3
      const itemTitles = document.querySelectorAll('.item-title');

      console.log(itemTitles);

      for (let i = 0; i < itemTitles.length; i++) {
         itemTitles[i].addEventListener('click', function () {
            console.log('클릭됨');
            console.log(itemTitles[i]);
            //1. id=1 > id content1
            let itemContents = document.querySelectorAll('.item-content');
            console.log(itemContents);

            //itemContents[i].classList.toggle('active'); //toggle 한방으로 처리

            if (itemContents[i].classList.contains('active1')) {
               itemContents[i].classList.remove('active1');
            } else {
               //clostAll();
               itemContents[i].classList.add('active1');
            }

            //0 -> 0 active
            //1 -> 1 active
         });
      }

      function clostAll() {
         let itemContents = document.querySelectorAll('.item-content');
         for (let el of itemContents) {
            el.classList.remove('active1');
         }
      }

      document.querySelector('#allCloseBtn').addEventListener('click', function () {
         //content 요소들에 쫓아가서 active 클래스를다 지워버리면.
         //열린게 닫힌 효과!!!
         //시작!!!!
         clostAll();
      });
   </script>

   <!--jQuiry start-->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"
      integrity="sha512-pumBsjNRGGqkPzKHndZMaAG+bir374sORyzM3uulLV14lN5LyykqNk8eEeUlUkB3U0M4FApyaHraT65ihJhDpQ=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <!--jQuiry end-->

   <!--업무추가 부분-->>
   <script>
      $(document).ready(function () {

         //$('#removetest').remove();

         let rowCnt = 4;
         $('#addRowBtn').click(function () {
            //버튼을 누르면 실행할 코드
            $('#dynamicTbody').append('<tr id="tr'+rowCnt+'"><th scope="row">'+rowCnt+'</th><td><div class="item-container"><p class="item-title"><input type="text" class="todoList" placeholder="업무 제목" name="todoList"></p><div class="item-content"><textarea type="text" class="todo" placeholder="불편사항" rows="5" cols="22" name="todo"></textarea></div></div></td><td><input type="date"></td><td><input type="date"></td><td><select><option value="1">김길동</option><option value="2">이길동</option><option value="3" selected>박길동</option><option value="4">최길동</option><option value="5">서길동</option></select></td><td> <button id="'+rowCnt+'" type="button" class="btn btn-danger deleteBtn">삭제</button></td></tr>');
            rowCnt++;
         });
         //삭제를 하고 싶음
         $(document).on('click', '.deleteBtn', function () {
            //tempId를 tmepId로 오탈자
            let tempId = $(this).attr('id');
            $('#tr' + tempId).remove();
         });
      })

      function openPopup(){
        window.open("popSummer.html", "new", "toolbar=no, menubar=no, scrollbars=yes, resizable=no, width=700, height=700, left=0, top=0"       
);
    }
   </script>

</body>

</html>